var pokemonRepository=function(){var repository=[],apiUrl="https://pokeapi.co/api/v2/pokemon/?limit=20";function add(pokemon){"object"==typeof pokemon&&"name"in pokemon&&"detailsUrl"in pokemon?repository.push(pokemon):console.log("add an object")}function getAll(){return repository}function addListItem(pokemon){pokemonRepository.loadDetails(pokemon).then((function(){var $row=$(".row"),$card=$('<div class="card" style="width:400px"></div>'),$image=$('<img class="card-img-top center" alt="pokemon card image" style="width:50%"  />');$image.attr("src",pokemon.imageUrlFront);var $cardBody=$('<div class="card-body"></div>'),$cardTitle=$("<h4 class='card-title' >"+pokemon.name+"</h4>"),$seeProfile=$('<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">See Profile</button>');$row.append($card),$card.append($image),$card.append($cardBody),$cardBody.append($cardTitle),$cardBody.append($seeProfile),$seeProfile.on("click",(function(event){showDetails(pokemon)}))}))}function showDetails(item){pokemonRepository.loadDetails(item).then((function(){console.log(item),showModal(item)}))}function loadList(){return $.ajax(apiUrl).then((function(json){json.results.forEach((function(item){var pokemon={name:item.name,detailsUrl:item.url};add(pokemon),console.log(pokemon)}))})).catch((function(e){console.error(e)}))}function loadDetails(item){var url=item.detailsUrl;return $.ajax(url).then((function(details){item.imageUrlFront=details.sprites.front_default,item.imageUrlBack=details.sprites.back_default,item.height=details.height,item.types=[];for(var i=0;i<details.types.length;i++)item.types.push(details.types[i].type.name);item.types.includes("grass")?($(".modal-header").css("color","green"),$(".modal-body").css("color","green")):item.types.includes("fire")?($(".modal-header").css("color","red"),$(".modal-body").css("color","red")):item.types.includes("psychic")?($(".modal-header").css("color","#FF69B4"),$(".modal-body").css("color","#FF69B4")):item.types.includes("poison")?($(".modal-header").css("color","purple"),$(".modal-body").css("color","purple")):item.types.includes("water")?($(".modal-header").css("color","blue"),$(".modal-body").css("color","blue")):item.types.includes("bug")?($(".modal-header").css("color","#3f000f"),$(".modal-body").css("color","#3f000f")):item.types.includes("rock")?($(".modal-header").css("color","#BC8F8F"),$(".modal-body").css("color","#BC8F8F")):item.types.includes("flying")?($(".modal-header").css("color","#2F4F4F"),$(".modal-body").css("color","#2F4F4F")):item.types.includes("electric")?($(".modal-header").css("color","gold"),$(".modal-body").css("color","gold")):item.types.includes("ice")?($(".modal-header").css("color","#4169E1"),$(".modal-body").css("color","#4169E1")):item.types.includes("ghost")?($(".modal-header").css("color","#8B008B"),$(".modal-body").css("color","#8B008B")):item.types.includes("ground")?($(".modal-header").css("color","#D2B48C"),$(".modal-body").css("color","#D2B48C")):item.types.includes("fairy")?($(".modal-header").css("color","#EE82EE"),$(".modal-body").css("color","#EE82EE")):item.types.includes("steel")&&($(".modal-header").css("color","#708090"),$(".modal-body").css("color","#708090")),item.abilities=[];for(var i=0;i<details.abilities.length;i++)item.abilities.push(details.abilities[i].ability.name);item.weight=details.weight})).catch((function(e){console.error(e)}))}function showModal(item){var modalBody=$(".modal-body"),modalTitle=$(".modal-title"),modalHeader=$(".modal-header");modalTitle.empty(),modalBody.empty();var nameElement=$("<h1>"+item.name+"</h1>"),imageElementFront=$('<img class="modal-img" style="width:50%">');imageElementFront.attr("src",item.imageUrlFront);var imageElementBack=$('<img class="modal-img" style="width:50%">');imageElementBack.attr("src",item.imageUrlBack);var heightElement=$("<p>height : "+item.height+"</p>"),weightElement=$("<p>weight : "+item.weight+"</p>"),typesElement=$("<p>types : "+item.types+"</p>"),abilitiesElement=$("<p>abilities : "+item.abilities+"</p>");modalTitle.append(nameElement),modalBody.append(imageElementFront),modalBody.append(imageElementBack),modalBody.append(heightElement),modalBody.append(weightElement),modalBody.append(typesElement),modalBody.append(abilitiesElement)}return{add:add,getAll:getAll,addListItem:addListItem,loadList:loadList,loadDetails:loadDetails,showModal:showModal}}();pokemonRepository.loadList().then((function(){pokemonRepository.getAll().forEach((function(pokemon){pokemonRepository.addListItem(pokemon)}))}));